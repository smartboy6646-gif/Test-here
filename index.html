<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8" />
  <title>Happy Propose Day ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>
  <style>
    body { margin: 0; padding: 0; background: #000; overflow: hidden; font-family: sans-serif; }
    #gameContainer { width: 100vw; height: 100vh; }
    
    /* ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•á ‡§¨‡§ü‡§® (Overlay) */
    #overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.85);
        display: flex; flex-direction: column;
        align-items: center; justify-content: center;
        z-index: 999; cursor: pointer;
    }
    .btn {
        border: 2px solid #ff4d6d; color: white; padding: 15px 40px;
        border-radius: 50px; font-size: 22px; margin-top: 20px;
        background: linear-gradient(45deg, #ff4d6d, #ff8fa3);
        box-shadow: 0 0 20px rgba(255, 77, 109, 0.6);
        animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
  </style>
</head>
<body>

<div id="overlay" onclick="startExperience()">
    <div style="font-size: 60px;">üíå</div>
    <div class="btn">Click Here to Open</div>
    <div style="color: #bbb; margin-top: 10px; font-size: 14px;">(Turn on Sound üîä)</div>
</div>

<div id="gameContainer"></div>

<script>
// --- ‡§∏‡•á‡§ü‡§ø‡§ô‡•ç‡§π‡§∞‡•Ç (‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡•á ‡§Ø‡§π‡§æ‡§Å ‡§´‡•ã‡§ü‡•ã ‡§∞ ‡§ó‡•Ä‡§§ ‡§´‡•á‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§®‡•Å‡§π‡•Å‡§®‡•ç‡§õ) ---
const CONFIG = {
    // ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§´‡•ç‡§®‡•ã ‡§´‡•ã‡§ü‡•ã‡§ï‡•ã ‡§≤‡§ø‡§ô‡•ç‡§ï ‡§∞‡§æ‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
    photoUrl: 'https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-4.0.3&w=800&q=80',
    // ‡§ó‡•Ä‡§§‡§ï‡•ã ‡§≤‡§ø‡§ô‡•ç‡§ï
    musicUrl: 'song.mp3'
};

let game;

function startExperience() {
    // Overlay ‡§π‡§ü‡§æ‡§â‡§®‡•á
    document.getElementById('overlay').style.display = 'none';
    
    // ‡§ó‡•á‡§Æ ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•á
    const config = {
        type: Phaser.AUTO,
        parent: 'gameContainer',
        width: window.innerWidth,
        height: window.innerHeight,
        backgroundColor: '#1a1a2e',
        scale: { mode: Phaser.Scale.RESIZE, autoCenter: Phaser.Scale.CENTER_BOTH },
        scene: MainScene
    };
    game = new Phaser.Game(config);
}

class MainScene extends Phaser.Scene {
    constructor() { super('MainScene'); }

    preload() {
        // ‡§´‡•ã‡§ü‡•ã ‡§≤‡•ã‡§° ‡§ó‡§∞‡•ç‡§®‡•á (‡§Ø‡§¶‡§ø ‡§≤‡•ã‡§° ‡§≠‡§è‡§® ‡§≠‡§®‡•á ‡§™‡§®‡§ø ‡§ï‡•ã‡§° ‡§®‡§∞‡•ã‡§ï‡§ø‡§®‡•á ‡§¨‡§®‡§æ‡§è‡§ï‡•ã ‡§õ‡•Å)
        this.load.image('userPhoto', CONFIG.photoUrl);
        this.load.audio('bgm', CONFIG.musicUrl);
    }

    create() {
        const w = this.scale.width;
        const h = this.scale.height;

        // ‡•ß. ‡§¨‡•ç‡§Ø‡§æ‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§®‡•ç‡§° (Gradient)
        const graphics = this.add.graphics();
        graphics.fillGradientStyle(0x2c0e37, 0x2c0e37, 0x0f0c29, 0x0f0c29, 1);
        graphics.fillRect(0, 0, w, h);

        // ‡•®. ‡§ö‡§ø‡§§‡•ç‡§∞‡§π‡§∞‡•Ç ‡§Ü‡§´‡•à‡§Ç ‡§¨‡§®‡§æ‡§â‡§®‡•á (No External Images needed)
        this.createTextures();

        // ‡•©. ‡§ó‡•Ä‡§§ ‡§¨‡§ú‡§æ‡§â‡§®‡•á (Error Proof)
        try {
            this.sound.pauseOnBlur = false;
            const music = this.sound.add('bgm', { volume: 0.6, loop: true });
            music.play();
        } catch(e) { console.log("Audio failed due to browser policy"); }

        // ‡•™. ‡§™‡§æ‡§∞‡•ç‡§ü‡§ø‡§ï‡§≤‡•ç‡§∏ (Particles)
        this.add.particles(0, 0, 'dot', {
            x: { min: 0, max: w },
            y: h + 50,
            speedY: { min: -50, max: -100 },
            scale: { start: 0.5, end: 0 },
            alpha: { start: 0.8, end: 0 },
            lifespan: 6000,
            quantity: 2,
            blendMode: 'ADD',
            tint: [ 0xff6699, 0xffffff, 0xff99cc ]
        });

        // ‡•´. ‡§Æ‡•Å‡§ü‡•Å (Heart) - ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü‡§ï‡•ã ‡§∞‡•Å‡§™‡§Æ‡§æ (‡§Ø‡•ã ‡§ï‡§π‡§ø‡§≤‡•ç‡§Ø‡•à ‡§´‡•á‡§≤ ‡§π‡•Å‡§Å‡§¶‡•à‡§®)
        this.heart = this.add.text(w/2, h/2 - 50, '‚ù§Ô∏è', { fontSize: '100px' })
            .setOrigin(0.5).setScale(0).setAlpha(0);

        // ‡•¨. ‡§è‡§®‡§ø‡§Æ‡•á‡§∏‡§® ‡§∏‡•Å‡§∞‡•Å
        this.startSequence();
    }

    // ‡§ö‡§ø‡§§‡•ç‡§∞‡§π‡§∞‡•Ç ‡§ï‡•ã‡§°‡§¨‡§æ‡§ü‡•à ‡§¨‡§®‡§æ‡§â‡§®‡•á ‡§´‡§®‡•ç‡§ï‡•ç‡§∏‡§®
    createTextures() {
        // ‡§∏‡§æ‡§®‡•ã ‡§•‡•ã‡§™‡•ç‡§≤‡•ã (Particle)
        const dot = this.make.graphics({x:0, y:0, add:false});
        dot.fillStyle(0xffffff);
        dot.fillCircle(10, 10, 10);
        dot.generateTexture('dot', 20, 20);
    }

    startSequence() {
        // ‡§Æ‡•Å‡§ü‡•Å ‡§ú‡•Å‡§Æ ‡§π‡•Å‡§®‡•á
        this.tweens.add({
            targets: this.heart,
            scale: 1,
            alpha: 1,
            duration: 1000,
            ease: 'Back.Out',
            onComplete: () => {
                // ‡§¢‡•Å‡§ï‡§¢‡•Å‡§ï‡•Ä (Heartbeat)
                this.tweens.add({
                    targets: this.heart,
                    scale: 1.2,
                    duration: 500,
                    yoyo: true,
                    repeat: -1
                });
                this.showText();
            }
        });
    }

    showText() {
     const messages = [
            "‡§§‡§ø‡§Æ‡•Ä ‡§Æ‡•á‡§∞‡•ã ‡§ú‡•Ä‡§µ‡§®‡§ï‡•ã ‡§§‡•ç‡§Ø‡•ã ‡§∏‡•Å‡§®‡•ç‡§¶‡§∞ ‡§â‡§™‡§π‡§æ‡§∞ ‡§π‡•å...",
            "‡§ú‡§∏‡§ï‡•ã ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§®‡§Æ‡§æ ‡§Æ‡•á‡§∞‡•ã ‡§∏‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§õ",
            "‡§§‡§ø‡§Æ‡•ç‡§∞‡•ã ‡§∏‡§æ‡§• ‡§¨‡§ø‡§®‡§æ ‡§Ø‡•ã ‡§Æ‡•Å‡§ü‡•Å ‡§Ö‡§ß‡•Å‡§∞‡•ã ‡§õ",
            "‡§π‡§∞‡•á‡§ï ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§Æ‡•ç‡§∞‡•à ‡§≠‡§è‡§∞ ‡§¨‡§æ‡§Å‡§ö‡•ç‡§® ‡§ö‡§æ‡§π‡§®‡•ç‡§õ‡•Å",
            "‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§∏‡§ß‡•à‡§Ç ‡§ñ‡•Å‡§∏‡•Ä ‡§∞‡§æ‡§ñ‡•ç‡§®‡•á ‡§µ‡§æ‡§ö‡§æ ‡§ó‡§∞‡•ç‡§õ‡•Å",
            "Happy Propose Day, My Everything ‚ù§Ô∏è",
            "üíñ I LOVE YOU SANCHITA BUDI üíñ"
        ];
        let delay = 0;
        let currentObj = null;

        messages.forEach((msg, i) => {
            this.time.delayedCall(delay, () => {
                if(currentObj) {
                    this.tweens.add({ targets: currentObj, alpha: 0, y: currentObj.y - 30, duration: 500 });
                }

                const fontSize = Math.min(50, this.scale.width / msg.length * 1.5);
                
                currentObj = this.add.text(this.scale.width/2, this.scale.height/2 + 80, msg, {
                    fontFamily: 'sans-serif',
                    fontSize: fontSize + 'px',
                    color: '#fff',
                    stroke: '#ff0066',
                    strokeThickness: 2,
                    shadow: { blur: 10, color: '#ff0066', fill: true }
                }).setOrigin(0.5).setAlpha(0).setY(this.scale.height/2 + 120);

                this.tweens.add({
                    targets: currentObj,
                    y: this.scale.height/2 + 80,
                    alpha: 1,
                    duration: 800
                });

                // ‡§Ö‡§®‡•ç‡§§‡§ø‡§Æ‡§Æ‡§æ ‡§´‡•ã‡§ü‡•ã ‡§¶‡•á‡§ñ‡§æ‡§â‡§®‡•á
                if(i === messages.length - 1) {
                    this.time.delayedCall(3000, () => this.revealPhoto(currentObj));
                }
            });
            delay += 2500;
        });
    }

    revealPhoto(lastText) {
        // ‡§Æ‡•Å‡§ü‡•Å ‡§∞ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§≤‡•Å‡§ï‡§æ‡§â‡§®‡•á
        this.tweens.add({ targets: [this.heart, lastText], alpha: 0, duration: 1000 });

        const cx = this.scale.width / 2;
        const cy = this.scale.height / 2;
        const size = Math.min(this.scale.width, this.scale.height) * 0.6;

        // ‡§´‡•ã‡§ü‡•ã ‡§ï‡§®‡•ç‡§ü‡•á‡§®‡§∞
        const container = this.add.container(cx, cy).setAlpha(0).setScale(0.5);

        // ‡§∏‡•á‡§§‡•ã ‡§¨‡•ã‡§∞‡•ç‡§°‡§∞
        const bg = this.add.rectangle(0, 0, size + 20, size + 60, 0xffffff);
        
        // ‡§´‡•ã‡§ü‡•ã (‡§Ø‡§¶‡§ø ‡§≤‡•ã‡§° ‡§≠‡§è‡§® ‡§≠‡§®‡•á ‡§ï‡§æ‡§≤‡•ã ‡§¨‡§ï‡•ç‡§∏ ‡§Ü‡§â‡§Å‡§õ)
        let img;
        if(this.textures.exists('userPhoto')) {
            img = this.add.image(0, -20, 'userPhoto').setDisplaySize(size, size);
        } else {
            // ‡§´‡•ã‡§ü‡•ã ‡§≤‡•ã‡§° ‡§®‡§≠‡§è‡§Æ‡§æ ‡§Ø‡•ã ‡§¶‡•á‡§ñ‡§ø‡§®‡•ç‡§õ
            img = this.add.rectangle(0, -20, size, size, 0x333333);
            const errText = this.add.text(0, -20, "Photo Loading...", { color:'#fff' }).setOrigin(0.5);
            container.add(errText);
        }

        const caption = this.add.text(0, size/2 + 15, "Forever & Always", {
            fontSize: '24px', color: '#000', fontStyle: 'bold'
        }).setOrigin(0.5);

        container.add([bg, img, caption]);

        // ‡§∏‡•á‡§§‡•ã ‡§´‡•ç‡§≤‡•ç‡§Ø‡§æ‡§∏ (Flash Effect)
        const flash = this.add.rectangle(0, 0, this.scale.width, this.scale.height, 0xffffff).setOrigin(0).setAlpha(0);
        
        this.tweens.add({
            targets: flash, alpha: 1, duration: 200, yoyo: true,
            onComplete: () => {
                this.tweens.add({
                    targets: container,
                    alpha: 1, scale: 1, rotation: 0.05,
                    duration: 1500, ease: 'Power2.Out'
                });
            }
        });
    }
}
</script>
</body>
</html>
